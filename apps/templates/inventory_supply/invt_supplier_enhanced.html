{% extends 'dashboard.html' %}

{% block content %}

<script src="https://unpkg.com/@tailwindcss/browser@4"></script>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- jQuery UI CSS (for styling the autocomplete dropdown) -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

<!-- jQuery UI JavaScript -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

<link href="https://cdn.datatables.net/v/dt/jszip-3.10.1/dt-2.1.4/b-3.1.1/b-html5-3.1.1/datatables.min.css" rel="stylesheet">
 
<script src="https://cdn.datatables.net/v/dt/jszip-3.10.1/dt-2.1.4/b-3.1.1/b-html5-3.1.1/datatables.min.js"></script>

<!-- Custom CSS for enhanced styling -->
<style>
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .card-shadow {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .btn-primary-custom {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    transition: all 0.3s ease;
  }
  
  .btn-primary-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
  }
  
  .btn-success-custom {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    border: none;
    transition: all 0.3s ease;
  }
  
  .btn-success-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(79, 172, 254, 0.4);
  }
  
  .table-modern {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }
  
  .table-modern thead {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .modal-modern {
    backdrop-filter: blur(10px);
  }
  
  .form-input-modern {
    transition: all 0.3s ease;
    border: 2px solid #e2e8f0;
  }
  
  .form-input-modern:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    transform: translateY(-1px);
  }

  .stats-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    border-radius: 16px;
    padding: 1.5rem;
    color: white;
    transition: transform 0.3s ease;
  }

  .stats-card:hover {
    transform: translateY(-5px);
  }

  .page-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    color: white;
  }

  .supplier-card {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    border-radius: 16px;
    padding: 1.5rem;
    transition: transform 0.3s ease;
  }

  .supplier-card:hover {
    transform: translateY(-3px);
  }
</style>

<link rel="stylesheet" type="text/css" href="/static/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

<!-- Page Header -->
<div class="page-header">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold mb-2">
        <i class="fas fa-truck mr-3"></i>Supplier Management
      </h1>
      <p class="text-blue-100">Manage your suppliers and vendor relationships</p>
    </div>
    <div class="stats-card">
      <div class="text-center">
        <div class="text-2xl font-bold" id="totalSuppliers">0</div>
        <div class="text-sm opacity-90">Total Suppliers</div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Modal for Updating Supplier -->
<div id="supplierModalUpdating" role="dialog" aria-modal="true" aria-labelledby="dialog-title" class="relative z-50 hidden modal-modern">
  <div aria-hidden="true" class="fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity"></div>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all w-full max-w-2xl card-shadow">
        
        <!-- Modal Header -->
        <div class="gradient-bg px-6 py-4">
          <div class="flex items-center">
            <div class="flex items-center justify-center w-12 h-12 rounded-full bg-white/20 mr-4">
              <i class="fas fa-edit text-white text-xl"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-white">Update Supplier</h3>
              <p class="text-blue-100 text-sm">Modify supplier information</p>
            </div>
          </div>
        </div>

        <!-- Modal Body -->
        <div class="px-6 py-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            
            <!-- Hidden ID field -->
            <input hidden type="text" id="idUpdate" class="form-input-modern">
            
            <!-- Supplier Name -->
            <div class="space-y-2">
              <label for="nameUpdate" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-building text-blue-500 mr-2"></i>Supplier Name
              </label>
              <input type="text" id="nameUpdate" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm">
            </div>

            <!-- Contact Person -->
            <div class="space-y-2">
              <label for="contact_person_update" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-user text-green-500 mr-2"></i>Contact Person
              </label>
              <input type="text" id="contact_person_update" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm">
            </div>

            <!-- Email -->
            <div class="space-y-2">
              <label for="email_update" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-envelope text-purple-500 mr-2"></i>Email
              </label>
              <input type="email" id="email_update" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm">
            </div>

            <!-- Phone -->
            <div class="space-y-2">
              <label for="phone_update" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-phone text-orange-500 mr-2"></i>Phone
              </label>
              <input type="tel" id="phone_update" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm">
            </div>

            <!-- Address (full width) -->
            <div class="md:col-span-2 space-y-2">
              <label for="address_update" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>Address
              </label>
              <textarea id="address_update" rows="3" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm resize-none"></textarea>
            </div>

          </div>
        </div>

        <!-- Modal Footer -->
        <div class="bg-gray-50 px-6 py-4 flex justify-end space-x-3">
          <button id="updateCancelBtn" type="button" class="px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition-all duration-300 close-modal">
            <i class="fas fa-times mr-2"></i>Cancel
          </button>
          <button id="updateBtn" type="button" class="px-6 py-3 btn-primary-custom text-white font-semibold rounded-lg">
            <i class="fas fa-save mr-2"></i>Update Supplier
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Modal for Adding New Supplier -->
<div id="supplierModal" role="dialog" aria-modal="true" aria-labelledby="dialog-title" class="relative z-50 hidden modal-modern">
  <div aria-hidden="true" class="fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity"></div>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all w-full max-w-2xl card-shadow">

        <!-- Modal Header -->
        <div class="gradient-bg px-6 py-4">
          <div class="flex items-center">
            <div class="flex items-center justify-center w-12 h-12 rounded-full bg-white/20 mr-4">
              <i class="fas fa-plus text-white text-xl"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold text-white">Add New Supplier</h3>
              <p class="text-blue-100 text-sm">Create a new supplier record</p>
            </div>
          </div>
        </div>

        <!-- Modal Body -->
        <div class="px-6 py-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <!-- Supplier Name -->
            <div class="space-y-2">
              <label for="name" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-building text-blue-500 mr-2"></i>Supplier Name
              </label>
              <input type="text" id="name" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm" placeholder="Enter supplier name">
            </div>

            <!-- Contact Person -->
            <div class="space-y-2">
              <label for="contact_person" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-user text-green-500 mr-2"></i>Contact Person
              </label>
              <input type="text" id="contact_person" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm" placeholder="Enter contact person name">
            </div>

            <!-- Email -->
            <div class="space-y-2">
              <label for="email" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-envelope text-purple-500 mr-2"></i>Email
              </label>
              <input type="email" id="email" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm" placeholder="Enter email address">
            </div>

            <!-- Phone -->
            <div class="space-y-2">
              <label for="phone" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-phone text-orange-500 mr-2"></i>Phone
              </label>
              <input type="tel" id="phone" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm" placeholder="Enter phone number">
            </div>

            <!-- Address (full width) -->
            <div class="md:col-span-2 space-y-2">
              <label for="address" class="block text-sm font-semibold text-gray-700">
                <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>Address
              </label>
              <textarea id="address" rows="3" class="form-input-modern w-full rounded-lg px-4 py-3 text-sm resize-none" placeholder="Enter supplier address"></textarea>
            </div>

          </div>
        </div>

        <!-- Modal Footer -->
        <div class="bg-gray-50 px-6 py-4 flex justify-end space-x-3">
          <button type="button" class="px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition-all duration-300 close-modal">
            <i class="fas fa-times mr-2"></i>Cancel
          </button>
          <button id="insertBtn" type="button" class="px-6 py-3 btn-success-custom text-white font-semibold rounded-lg">
            <i class="fas fa-plus mr-2"></i>Add Supplier
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Main Content Area -->
<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
  <div class="max-w-7xl mx-auto">
    <div class="bg-white rounded-2xl shadow-2xl overflow-hidden card-shadow">

      <!-- Action Buttons Section -->
      <div class="bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200">
        <div class="flex flex-wrap gap-4 items-center justify-between">
          <div class="flex gap-3">
            <button id="addSupplierBtn" class="btn-success-custom text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 hover:shadow-lg">
              <i class="fas fa-plus mr-2"></i>Add Supplier
            </button>
            <button id="updateSupplierBtn" class="btn-primary-custom text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 hover:shadow-lg">
              <i class="fas fa-edit mr-2"></i>Update Supplier
            </button>
          </div>

          <!-- Search Section -->
          <div class="flex gap-3 items-center">
            <div class="relative">
              <input type="text" id="searchInput" placeholder="Search suppliers..." class="form-input-modern pl-10 pr-4 py-2 rounded-lg text-sm w-64">
              <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Table Section -->
      <div class="p-6">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold text-gray-800">
            <i class="fas fa-list mr-3 text-blue-500"></i>Supplier Directory
          </h2>
          <div class="flex items-center space-x-4 text-sm text-gray-600">
            <div class="flex items-center">
              <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
              <span>Active</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
              <span>Pending</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
              <span>Inactive</span>
            </div>
          </div>
        </div>

        <div class="overflow-x-auto">
          <table id="supplier_table" class="table-modern w-full">
            <thead class="gradient-bg text-white">
              <tr>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-building mr-2"></i>Name
                </th>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-user mr-2"></i>Contact Person
                </th>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-envelope mr-2"></i>Email
                </th>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-phone mr-2"></i>Phone
                </th>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-map-marker-alt mr-2"></i>Address
                </th>
                <th class="px-6 py-4 text-left text-sm font-semibold">
                  <i class="fas fa-user-cog mr-2"></i>User
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <!-- Data will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/static/inventory_supply/supplier.js"></script>

{% endblock %}
